<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Open Sesame by liuxd</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Open Sesame</h1>
          <h2>帐号管理工具。</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/liuxd/OpenSesame/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/liuxd/OpenSesame/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/liuxd/OpenSesame" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a id="open-sesame" class="anchor" href="#open-sesame" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="http://liuxd.github.io/OpenSesame">Open Sesame</a>
</h1>

<h2>
<a id="概述" class="anchor" href="#%E6%A6%82%E8%BF%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>概述</h2>

<ul>
<li>两个文件：一个程序文件，一个数据文件，就够了。</li>
<li>两个模式：可以在浏览器里操作网页；也可以在终端里操作命令行。</li>
<li>数据安全：每个程序的秘钥都不同。即使数据文件被别人拷贝走，即使别人能够看到程序代码，也没用。</li>
</ul>

<h2>
<a id="需求" class="anchor" href="#%E9%9C%80%E6%B1%82" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>需求</h2>

<ul>
<li>PHP5.4+

<ul>
<li>mbstring</li>
<li>mcrypt</li>
<li>zlib</li>
</ul>
</li>
</ul>

<h2>
<a id="安装" class="anchor" href="#%E5%AE%89%E8%A3%85" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>安装</h2>

<pre><code>git clone git@github.com:open-sesame/OpenSesame.git
cp dev/config.ini.sample src/config.ini # 根据自己需求修改 src/config.ini
cd open-sesame/dev
php phar-packer.php --name=os --path=../src/
nohup php -S 0.0.0.0:8000 os.phar &gt; /dev/null &amp;
</code></pre>

<p>可以访问<a href="http://localhost:8000">http://localhost:8000</a>了。</p>

<h2>
<a id="使用" class="anchor" href="#%E4%BD%BF%E7%94%A8" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>使用</h2>

<p>本软件有两种模式：<code>服务器模式</code>、<code>命令行模式</code></p>

<ul>
<li>
<strong>服务器模式</strong> - 一目了然不解释。</li>
<li>
<strong>命令行模式</strong> - 见VCR：</li>
</ul>

<p><a href="https://asciinema.org/a/b0rkuneybbvfwjjptv8yj9aor"><img src="https://asciinema.org/a/b0rkuneybbvfwjjptv8yj9aor.png" alt="asciicast"></a></p>

<h2>
<a id="开发" class="anchor" href="#%E5%BC%80%E5%8F%91" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>开发</h2>

<h4>
<a id="--调试模式--" class="anchor" href="#--%E8%B0%83%E8%AF%95%E6%A8%A1%E5%BC%8F--" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>- 调试模式 -</h4>

<ul>
<li>方法：在页面URL中增加参数：<code>debug</code>。随便设定一个非空值即可进入调试模式。</li>
<li>功能：可以显示本页面会显示的数据以及对应的页面模板文件。</li>
<li>例子：<a href="http://localhost:8000?debug=1">http://localhost:8000?debug=1</a>
</li>
</ul>

<h4>
<a id="--代码规范--" class="anchor" href="#--%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83--" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>- 代码规范 -</h4>

<ul>
<li>说明：本项目PHP代码完全遵循<code>PSR-1</code>、<code>PSR-2</code>规范。</li>
<li>安装：在<code>dev/</code>目录下运行<code>composer.phar install</code>安装代码扫描工具。</li>
<li>运行：<code>./code-sniffer.sh</code>可以扫描本项目PHP代码。</li>
</ul>

<h4>
<a id="--辅助工具--" class="anchor" href="#--%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7--" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>- 辅助工具 -</h4>

<ul>
<li>创建新的命令程序：php index.php createCmd {$command_name}</li>
<li>创建新的控制器：php index.php createController {$controller_name}</li>
</ul>

<h4>
<a id="--打包发布--" class="anchor" href="#--%E6%89%93%E5%8C%85%E5%8F%91%E5%B8%83--" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>- 打包发布 -</h4>

<ul>
<li>需求：由于要打包成<code>phar</code>格式的程序包，所以需要将<code>php.ini</code>的<code>phar.readonly</code>设置为<code>Off</code>。</li>
<li>打包：使用<code>dev/phar-packer.php</code>进行打包。</li>
<li>举例：<code>./phar-packer.php --name=opensesame --path=../src</code>
</li>
</ul>

<h4>
<a id="--发新版本--" class="anchor" href="#--%E5%8F%91%E6%96%B0%E7%89%88%E6%9C%AC--" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>- 发新版本 -</h4>

<ul>
<li>工具：<code>dev/release.sh</code>
</li>
<li>举例：<code>./release.sh v5.0.1</code>
</li>
</ul>
        </section>

        <footer>
          Open Sesame is maintained by <a href="https://github.com/liuxd">liuxd</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
